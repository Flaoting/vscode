# Floating 菜鸡的课设之路
## Day0 2020/2/25-2020/4/9
### 开发内容 
+ 选定题材
+ 咨询专业人员（状元阁管理员）
+ 进行初步的需求分析和类的设计
+ 与同学和老师进行交流
+ 进行预备知识的学习，C++ Qt VScode VS Git github的使用
### 有效开发时间 20h 

## Day1 2020/4/9
### 开发时间： 6h
### 开发内容 
+ 整理需求分析
+ 打成Markdown文档进行保留（转成PDF）
+ 进行初步的类的设计
+ Date Table People Student Teacher Manager BigBoss
+ 上述类及其继承关系
## Day2 2020/4/11
### 开发时间 5h
### 开发内容  
+ 写出类的框架代码（保存为头文件）
+ 预备建立测试工程
### 遇到及处理并处理的问题
+ 问题：报错码E1696
+ 原因：引入的项找不到包含的头文件
+ 解决办法： 在project ->设置-> C++ -> 常规 -> 增加引入文件的地址
## Day3 2020/4/12
### 开发时间 8h 
### 开发内容
+ 对Date类进行详细开发
+ 进行运算符重载（+ = - < > ==）
+ 计算日期差值的函数（2h）
+ 工程中引入了 Table类 People 类 Student类的初始化
## Day4 2020/4/13
### 开发时间 3h
### 开发内容
+ 完善Student类的
+ 统一了源码保存路径
+ 测试之前的代码
### 遇到问题
+ 重定义了缺省构造的参数
+ 路径不统一导致文件include时有多重路径
+ 解决办法： 去除附加路径，删掉定义中的缺省构造
  

## Day5 2020/4/20

### 开发时间 5h
### 开发内容，登录界面，密码的储存操作（初步设计）
将string类型转换为字符数组
``` 
char buf[10];
string str("ABCDEFG");
length = str.copy(buf, 9);
buf[length] = '\0';
或者
char buf[10];
string str("ABCDEFG");
strcpy(buf, str.c_str());//strncpy(buf, str.c_str(), 10);

``` 
getline
+ 在istream下
+ file.getline（char *，int，截断字符）
+ 文件保存格式
fstream oFile(s3, ios::out|ios::app);
	if (!oFile) {
		cout << "Error!" << endl;
		exit(0);
	}
	char name[15] = "潘佳辉";
	char phone[20] = "15832513211";
	People std(name, 'F', phone);
	cout << std.getName() << endl;
	oFile << "姓名" << "," << "性别" << "," << "电话" <<  endl;
	oFile << std.getName() << "," << std.getGender() << "," << std.getPhone() << endl;	
	oFile.close();



## Day6 2020/4/21
### 开发时长 9h
### 开发内容
+ 学习MFC
+ 配置Qt环境
+ 完善Date重载
+ 完善登录界面和密码储存
+ 学习了MFC工程的创建
+ 学习MFC的框架原理
##　后期用Ｑｔ作为哦图形化界面的开发环境
### 下次开发计划 
+ 开发添加学生的函数和文件储存

## Day 7 2020/4/27

### 开发时长 3h
### 开发内容 Lesson类的设计和实现 Table的完善

  **备注： 中间陆陆续续看了几次，没什么思路 ，就是把重载了一些运算符什么的，直到今天下午有看了一下，突破性的增加了 Lesson类，记录了第几节这个信息**

  ### 说一点开发体会吧
  1. 框架设计很重要，类的设计也很重要。
  2. 我觉得可以参照一切皆是类的思想，多用一点类。比如表格类什么的
  3. 注意放在不同的文件夹里，方便管理。
  4. git真香，一定得用明白了
  5. 这工程主要是思路啊，思路有了，代码就是手到擒来啊

## Day8 2020/4/28 - 2020/5/2

### 开发时长2h 
### 开发内容 
  + 主要学习了在头文件和源文件内设文件夹，方便管理和查找
  + 增加点需求 有一对多的情况 目前实现上有点障碍 初步设计是直接改变薪资标准，不考虑冲突
  
## Day9 2020/5/3
### 开发时长8h
### 开发内容 

  + 增加了BaseFile类 是文件的基类
  + 增加了Menu类 方便打印菜单，是菜单的基类
  + 增加了PremaryMenu类 会进行使用前声明
  
## Day10 2020/5/4

### 开发时长 6h
### 开发内容

  + 上午做了 适应窗口的类，就是调到更好看一点，学了一些system的函数
  + 还零零散散的增加了一写东西，记不起了
### 开发体会

  + 晚上是返璞归真的一天，看着代码发呆了好久，没什么思路
  + 于是拿出了八张A4纸，认认真真的整理了思路的图
  + 模拟了设计路线，这是一项非常有意义的工作，让我的思路很清晰
  + 也清除的认识到剩下的工作量之大 

## Day 11 2020/5/5
### 开发时长 8h
**今天是五一小长假的最后一天了，肝的有点猛了**
### 开发内容
+ 先增加了 STDInfo AddMode AddSTD AddStdMenu Peonum 几个重要的类
+ 实现 PeoNum的时候还算比较容易，就是读取一次增加一个，然后没有要创建
+ PeoNum是在存取文件的时候读取一下，这样就能准确的进行记录了
+ 然后实现的时候历尽千山万水，前边写的类和后边有些不太兼容，实在是太坑了
+ 重载了前边Student Purpose里的 = 号，更改了People 里ID的属性
+ 又改了Purpose的储存方式，选择了vector ，用了迭代器遍历
+ stdMenu是进行学生信息的录入的，感觉耦合程度有点高了，但是封装起来还行
+ 实现了学生信息的存储，就是储存在一个.dat 里，明天实现存在csv里边吧

## Day12 2020/5/6 
### 开发时长 3h
### 开发内容
  + 仿照学生信息的增加，实现了老师信息的增加
  + 把原来的ADDMode 全部换成了OperateMode
  + 增加了 TEAInfo  AddTEA AddTEAMenu 
  **今天的可有点多啊，时间没多少，明天实现存储表格**

  ### 开发体会
  + 类的抽象不够彻底 体会到了有些代码能够更精简

## Day13 2020/5/7-2020/5/8

### 开发时长 8h

### 开发内容 
  
  + 修改了Purpose类的储存方式，因为存入string 到文件会出
  + 修改了与之匹配的各种方法，以为从容器到数组还是要改的挺多的
  + 检查出了一些问题，比如没有拷贝构造函数，或者没有重载赋值号


### 遭遇问题
  + 被一个bug困扰了三天，就是把含有string类的对象存入二进制文件，提取出文件到一个对象，析构这个对象时，string底层的指针不能被释放，而导致内存泄漏
  + 重读了C++的教材，线上找了好多的资料，理解了string底层原理，但是没有什么好的处理办法，尤其是存入文件时
  + 由于需要存入二进制文件，没有找到什么好的处理办法，智能把string改成了字符数组


## Day14 2020/5/9

### 开发时长 8h
### 开发内容 
  + 增加了TABInfo OperateTab 等类
  + 增加了StoreTable类，相当于把Table 存入文件的类
  + 上述两个类可以实现互相转化，只在提取和写入文件是进行
  + 就是在文件中存入StoreTable ，构造和操作用Table
  + 尝试实现在写入问价前改变ID 但是遇到了疯狂报错

## Day15 2020/5/10

### 开发时长 9h 

### 开发体会

  + 今天是开发了一整天的一天
  + 上午主要在研究那几十个报错，非常的可怕，直到我放弃了中文搜索，发现了是循环包含头文件的问题
  + 为了解决上述问题，我把OperateSTD声明为Student的友元函数(Teacher类类似)
  + 这样虽然失去了封装的特性，但是实现了访问ID的功能
  + 如果声明外部函数或者公有接口来修改ID，那么会让ID处于更危险的位置
  + 声明友元类这个操作不会直接影响Studnet ,因为OperateSTD的封装性也很强
  + 只要注意内部实现的时候不要更改Student的成员就好了
  + 上述所有的原因只是因为只声明友元函数的话会造成循环包含头文件的问题


1. 在设计类的时候一定要设计好，不能再出现循环包含头文件的问题
2. 搜索解决方法的时候，Bing十分钟搜不到的，果断直接上Stack Overflow
3. 调试的时候把输出页面调试的好一点


### 开发内容
  + 上午主要在研究那几十个报错，非常的可怕，直到我放弃了中文搜索，发现了是循环包含头文件的问题
  + 实现了在存如文件前对People的ID进行修改
  + 就是只有存入问价的对象才会占有ID号码
  + 增加了Manager类，当然是继承了people ,实现了这个Manager修改自身密钥的方法
  + 增加了Record类，这个类是抽象类，以后会派生出很多记录的类型
  + TransactionRecord类，这是记录收银的类
  + 在record里边内置里时间戳，存入数据时候这样存，在提取的时候转化成标准时间
  + 在stdfax里边实现了转换函数

### 预期设计
  + 实现交易记录的保存
  + 实现店内流水记录的保存
  + 实现随机更改人员信息
  + 实现提醒学生应该缴纳多少学费的功能
  + 实现记录课程是什么类型 (一对一 一对多 小班课等等)
  + 实现对课程单价的定义和修改
  + 实现初始化功能，就是创建文件夹


## Day16 2020/5/11

### 开发时长 5h

### 开发内容 
  + 实现了TransactionRecord及其Menu
  + 实现了上述记录的保存
  + 测试了相关功能
  + 增加了流水账类
  + 增加了流水账Menu（未完成）
 
### 想法记录 
  + 用一个二元联通表（二元关系记录）记录师生关系，但是这个数据可能很稀疏
  + 可以导出成链式前向星
  + 在Lesson记录课程类别这个属性
  + 用Map实现人的ID和对象的对应



## Day17 2020/5/12

### 开发时长 6h

### 开发内容
  
   + 实现了 RunningRecord 的记录
   + 准备用一张连通图来记录师生关系，发现很麻烦，而且堆栈溢出
   + 所以半天设计的一个类就给删除了
   + 实现了对login的封装，从外部函数封装到了Menu里边
   + 测试了Login的功能
   + 更改了显示的输入函数
   +   
### 当前代码量 4795


## Day18 2020/5/13

**今天是值得纪念的一天，找到了存储学生老师相互关系的方式，实现了课表的双向填充和查找**

### 开发时长 5h

### 开发内容
   + 早上进行了两个小时的当前问题分析
   + 突破性的找到了储存关系的最佳途径
   + 增加了Table类里边记录教学组合的成员
   + 实现了存储课表时的双向储存，即为老师和学生的同时进行储存
   + 具体还有挺多，明天再写吧

### 当前代码量 4967



## Day19 2020/5/14

**今天修复了很多bug，比如StoreTable到Table的信息丢失问题**

### 开发时长 7h

### 开发内容
   + 实现了生成课表的.csv文件
   + 实现了教师和学生数据的分别储存
   + 实现了课表信息和功能的全面化
   + 实现了课程类型的记录

### 当前代码量 5367

### 开发心得
   +  前期的模块设计做的不够好
   +  后边修修补补，删删减减一直在打补丁
   +  索性前期做的封装还不错
   +  删删减减还能hold得住
### 开发进程预期
  + 三天之内完工喽
  + 现在还需要实现的功能总结一下
  + 实现对课程单价的定义和修改
  + 修改个人信息模块 O(n)查询吧
  + map<int,string>
  + 想一些配置文件
  + 实现提醒缴纳多少学费
  + 实现Manager的记录和保存
  + 最重要的是登录和控制逻辑
  + 最后一些顶层的封装



